{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst react_1 = __importDefault(require(\"react\"));\n\nconst react_dnd_1 = require(\"react-dnd\");\n\nconst context_1 = __importDefault(require(\"./context\"));\n\nconst itemContext_1 = __importDefault(require(\"./itemContext\"));\n\nfunction useDrag( // @ts-ignore\nspec) {\n  const connectedDragRef = react_1.default.useRef();\n  const {\n    setDragMonitor,\n    setConnectedDragSource,\n    setInitialDepth\n  } = react_1.default.useContext(context_1.default);\n  const {\n    id,\n    type,\n    depth\n  } = react_1.default.useContext(itemContext_1.default);\n  const [collectedProps, originalDonnectDragSource, connectDragPreview] = react_dnd_1.useDrag(Object.assign(Object.assign({}, spec), {\n    collect: monitor => {\n      const $isDragging = monitor.isDragging();\n      return Object.assign(Object.assign({}, spec && spec.collect ? spec.collect(monitor) : undefined), {\n        $isDragging\n      });\n    },\n    isDragging: monitor => monitor.getItem().id === id,\n    item: Object.assign(Object.assign({\n      type\n    }, spec && spec.item ? spec.item : {}), {\n      id\n    }),\n\n    begin(monitor) {\n      setInitialDepth(depth);\n      setDragMonitor(monitor);\n\n      if (spec && spec.begin) {\n        const result = spec.begin(monitor);\n\n        if (typeof result === 'object') {\n          return Object.assign(Object.assign({\n            type\n          }, result), {\n            id\n          });\n        }\n      }\n\n      return undefined;\n    },\n\n    end() {\n      setInitialDepth(undefined);\n      setDragMonitor(undefined);\n\n      if (spec && spec.end) {\n        spec.end(...arguments);\n      }\n    }\n\n  }));\n\n  const connectDragSource = function () {\n    const result = originalDonnectDragSource(...arguments); // @ts-ignore\n\n    connectedDragRef.current = result;\n    return result;\n  };\n\n  const {\n    $isDragging\n  } = collectedProps,\n        rest = __rest(collectedProps, [\"$isDragging\"]);\n\n  react_1.default.useEffect(() => {\n    if ($isDragging) {\n      setConnectedDragSource(connectedDragRef);\n    }\n  }, [$isDragging, setConnectedDragSource]);\n  return [// @ts-ignore\n  rest, connectDragSource, connectDragPreview];\n}\n\nexports.default = useDrag;","map":{"version":3,"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","__importDefault","mod","__esModule","defineProperty","exports","value","react_1","require","react_dnd_1","context_1","itemContext_1","useDrag","spec","connectedDragRef","default","useRef","setDragMonitor","setConnectedDragSource","setInitialDepth","useContext","id","type","depth","collectedProps","originalDonnectDragSource","connectDragPreview","assign","collect","monitor","$isDragging","isDragging","undefined","getItem","item","begin","result","end","connectDragSource","current","rest","useEffect"],"sources":["D:/Rofiq/Kerjaan/bigio/repo/bigio/sorter-dnd/node_modules/react-sortly/lib/useDrag.js"],"sourcesContent":["\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst react_dnd_1 = require(\"react-dnd\");\nconst context_1 = __importDefault(require(\"./context\"));\nconst itemContext_1 = __importDefault(require(\"./itemContext\"));\nfunction useDrag(\n// @ts-ignore\nspec) {\n    const connectedDragRef = react_1.default.useRef();\n    const { setDragMonitor, setConnectedDragSource, setInitialDepth } = react_1.default.useContext(context_1.default);\n    const { id, type, depth } = react_1.default.useContext(itemContext_1.default);\n    const [collectedProps, originalDonnectDragSource, connectDragPreview] = react_dnd_1.useDrag(Object.assign(Object.assign({}, spec), { collect: (monitor) => {\n            const $isDragging = monitor.isDragging();\n            return Object.assign(Object.assign({}, (spec && spec.collect ? spec.collect(monitor) : undefined)), { $isDragging });\n        }, isDragging: (monitor) => monitor.getItem().id === id, item: Object.assign(Object.assign({ type }, (spec && spec.item ? spec.item : {})), { id }), begin(monitor) {\n            setInitialDepth(depth);\n            setDragMonitor(monitor);\n            if (spec && spec.begin) {\n                const result = spec.begin(monitor);\n                if (typeof result === 'object') {\n                    return Object.assign(Object.assign({ type }, result), { id });\n                }\n            }\n            return undefined;\n        },\n        end(...args) {\n            setInitialDepth(undefined);\n            setDragMonitor(undefined);\n            if (spec && spec.end) {\n                spec.end(...args);\n            }\n        } }));\n    const connectDragSource = (...args) => {\n        const result = originalDonnectDragSource(...args);\n        // @ts-ignore\n        connectedDragRef.current = result;\n        return result;\n    };\n    const { $isDragging } = collectedProps, rest = __rest(collectedProps, [\"$isDragging\"]);\n    react_1.default.useEffect(() => {\n        if ($isDragging) {\n            setConnectedDragSource(connectedDragRef);\n        }\n    }, [$isDragging, setConnectedDragSource]);\n    return [\n        // @ts-ignore\n        rest,\n        connectDragSource,\n        connectDragPreview,\n    ];\n}\nexports.default = useDrag;\n"],"mappings":"AAAA;;AACA,IAAIA,MAAM,GAAI,QAAQ,KAAKA,MAAd,IAAyB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;EAClD,IAAIC,CAAC,GAAG,EAAR;;EACA,KAAK,IAAIC,CAAT,IAAcH,CAAd,EAAiB,IAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,CAArC,EAAwCG,CAAxC,KAA8CF,CAAC,CAACO,OAAF,CAAUL,CAAV,IAAe,CAAjE,EACbD,CAAC,CAACC,CAAD,CAAD,GAAOH,CAAC,CAACG,CAAD,CAAR;;EACJ,IAAIH,CAAC,IAAI,IAAL,IAAa,OAAOI,MAAM,CAACK,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWP,CAAC,GAAGC,MAAM,CAACK,qBAAP,CAA6BT,CAA7B,CAApB,EAAqDU,CAAC,GAAGP,CAAC,CAACQ,MAA3D,EAAmED,CAAC,EAApE,EAAwE;IACpE,IAAIT,CAAC,CAACO,OAAF,CAAUL,CAAC,CAACO,CAAD,CAAX,IAAkB,CAAlB,IAAuBN,MAAM,CAACC,SAAP,CAAiBO,oBAAjB,CAAsCL,IAAtC,CAA2CP,CAA3C,EAA8CG,CAAC,CAACO,CAAD,CAA/C,CAA3B,EACIR,CAAC,CAACC,CAAC,CAACO,CAAD,CAAF,CAAD,GAAUV,CAAC,CAACG,CAAC,CAACO,CAAD,CAAF,CAAX;EACP;EACL,OAAOR,CAAP;AACH,CAVD;;AAWA,IAAIW,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;IAAE,WAAWA;EAAb,CAAvC;AACH,CAFD;;AAGAV,MAAM,CAACY,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;;AACA,MAAMC,OAAO,GAAGN,eAAe,CAACO,OAAO,CAAC,OAAD,CAAR,CAA/B;;AACA,MAAMC,WAAW,GAAGD,OAAO,CAAC,WAAD,CAA3B;;AACA,MAAME,SAAS,GAAGT,eAAe,CAACO,OAAO,CAAC,WAAD,CAAR,CAAjC;;AACA,MAAMG,aAAa,GAAGV,eAAe,CAACO,OAAO,CAAC,eAAD,CAAR,CAArC;;AACA,SAASI,OAAT,EACA;AACAC,IAFA,EAEM;EACF,MAAMC,gBAAgB,GAAGP,OAAO,CAACQ,OAAR,CAAgBC,MAAhB,EAAzB;EACA,MAAM;IAAEC,cAAF;IAAkBC,sBAAlB;IAA0CC;EAA1C,IAA8DZ,OAAO,CAACQ,OAAR,CAAgBK,UAAhB,CAA2BV,SAAS,CAACK,OAArC,CAApE;EACA,MAAM;IAAEM,EAAF;IAAMC,IAAN;IAAYC;EAAZ,IAAsBhB,OAAO,CAACQ,OAAR,CAAgBK,UAAhB,CAA2BT,aAAa,CAACI,OAAzC,CAA5B;EACA,MAAM,CAACS,cAAD,EAAiBC,yBAAjB,EAA4CC,kBAA5C,IAAkEjB,WAAW,CAACG,OAAZ,CAAoBpB,MAAM,CAACmC,MAAP,CAAcnC,MAAM,CAACmC,MAAP,CAAc,EAAd,EAAkBd,IAAlB,CAAd,EAAuC;IAAEe,OAAO,EAAGC,OAAD,IAAa;MACnJ,MAAMC,WAAW,GAAGD,OAAO,CAACE,UAAR,EAApB;MACA,OAAOvC,MAAM,CAACmC,MAAP,CAAcnC,MAAM,CAACmC,MAAP,CAAc,EAAd,EAAmBd,IAAI,IAAIA,IAAI,CAACe,OAAb,GAAuBf,IAAI,CAACe,OAAL,CAAaC,OAAb,CAAvB,GAA+CG,SAAlE,CAAd,EAA6F;QAAEF;MAAF,CAA7F,CAAP;IACH,CAH8H;IAG5HC,UAAU,EAAGF,OAAD,IAAaA,OAAO,CAACI,OAAR,GAAkBZ,EAAlB,KAAyBA,EAH0E;IAGtEa,IAAI,EAAE1C,MAAM,CAACmC,MAAP,CAAcnC,MAAM,CAACmC,MAAP,CAAc;MAAEL;IAAF,CAAd,EAAyBT,IAAI,IAAIA,IAAI,CAACqB,IAAb,GAAoBrB,IAAI,CAACqB,IAAzB,GAAgC,EAAzD,CAAd,EAA6E;MAAEb;IAAF,CAA7E,CAHgE;;IAGsBc,KAAK,CAACN,OAAD,EAAU;MAChKV,eAAe,CAACI,KAAD,CAAf;MACAN,cAAc,CAACY,OAAD,CAAd;;MACA,IAAIhB,IAAI,IAAIA,IAAI,CAACsB,KAAjB,EAAwB;QACpB,MAAMC,MAAM,GAAGvB,IAAI,CAACsB,KAAL,CAAWN,OAAX,CAAf;;QACA,IAAI,OAAOO,MAAP,KAAkB,QAAtB,EAAgC;UAC5B,OAAO5C,MAAM,CAACmC,MAAP,CAAcnC,MAAM,CAACmC,MAAP,CAAc;YAAEL;UAAF,CAAd,EAAwBc,MAAxB,CAAd,EAA+C;YAAEf;UAAF,CAA/C,CAAP;QACH;MACJ;;MACD,OAAOW,SAAP;IACH,CAb8H;;IAc/HK,GAAG,GAAU;MACTlB,eAAe,CAACa,SAAD,CAAf;MACAf,cAAc,CAACe,SAAD,CAAd;;MACA,IAAInB,IAAI,IAAIA,IAAI,CAACwB,GAAjB,EAAsB;QAClBxB,IAAI,CAACwB,GAAL,CAAS,YAAT;MACH;IACJ;;EApB8H,CAAvC,CAApB,CAAxE;;EAqBA,MAAMC,iBAAiB,GAAG,YAAa;IACnC,MAAMF,MAAM,GAAGX,yBAAyB,CAAC,YAAD,CAAxC,CADmC,CAEnC;;IACAX,gBAAgB,CAACyB,OAAjB,GAA2BH,MAA3B;IACA,OAAOA,MAAP;EACH,CALD;;EAMA,MAAM;IAAEN;EAAF,IAAkBN,cAAxB;EAAA,MAAwCgB,IAAI,GAAGrD,MAAM,CAACqC,cAAD,EAAiB,CAAC,aAAD,CAAjB,CAArD;;EACAjB,OAAO,CAACQ,OAAR,CAAgB0B,SAAhB,CAA0B,MAAM;IAC5B,IAAIX,WAAJ,EAAiB;MACbZ,sBAAsB,CAACJ,gBAAD,CAAtB;IACH;EACJ,CAJD,EAIG,CAACgB,WAAD,EAAcZ,sBAAd,CAJH;EAKA,OAAO,CACH;EACAsB,IAFG,EAGHF,iBAHG,EAIHZ,kBAJG,CAAP;AAMH;;AACDrB,OAAO,CAACU,OAAR,GAAkBH,OAAlB"},"metadata":{},"sourceType":"script"}
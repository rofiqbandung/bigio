{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst react_1 = __importDefault(require(\"react\"));\n\nconst react_dnd_1 = require(\"react-dnd\");\n\nconst itemContext_1 = __importDefault(require(\"./itemContext\"));\n\nfunction useDrop(spec) {\n  const connectedDropRef = react_1.default.useRef();\n  const wasHoveredRef = react_1.default.useRef(false);\n  const {\n    id,\n    type,\n    onHoverBegin,\n    onHoverEnd\n  } = react_1.default.useContext(itemContext_1.default);\n\n  const rest = __rest(spec || {}, []);\n\n  const [collectedProps, originalConnectDropTarget] = react_dnd_1.useDrop(Object.assign(Object.assign({}, rest), {\n    accept: type,\n    collect: monitor => {\n      const hovered = monitor.isOver({\n        shallow: true\n      });\n      return Object.assign({\n        hovered\n      }, spec && spec.collect ? spec.collect(monitor) : {});\n    }\n  }));\n  react_1.default.useEffect(() => {\n    if (collectedProps.hovered) {\n      onHoverBegin(id, connectedDropRef);\n      wasHoveredRef.current = true;\n    } else if (wasHoveredRef.current === true) {\n      onHoverEnd(id);\n    }\n  }, [id, collectedProps.hovered, onHoverBegin, onHoverEnd]);\n\n  const connectDropTarget = function () {\n    const result = originalConnectDropTarget(...arguments); // @ts-ignore\n\n    connectedDropRef.current = result;\n    return result;\n  }; // @ts-ignore\n\n\n  return [collectedProps, connectDropTarget];\n}\n\nexports.default = useDrop;","map":{"version":3,"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","__importDefault","mod","__esModule","defineProperty","exports","value","react_1","require","react_dnd_1","itemContext_1","useDrop","spec","connectedDropRef","default","useRef","wasHoveredRef","id","type","onHoverBegin","onHoverEnd","useContext","rest","collectedProps","originalConnectDropTarget","assign","accept","collect","monitor","hovered","isOver","shallow","useEffect","current","connectDropTarget","result"],"sources":["D:/Rofiq/Kerjaan/bigio/repo/bigio/sorter-dnd/node_modules/react-sortly/lib/useDrop.js"],"sourcesContent":["\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst react_dnd_1 = require(\"react-dnd\");\nconst itemContext_1 = __importDefault(require(\"./itemContext\"));\nfunction useDrop(spec) {\n    const connectedDropRef = react_1.default.useRef();\n    const wasHoveredRef = react_1.default.useRef(false);\n    const { id, type, onHoverBegin, onHoverEnd } = react_1.default.useContext(itemContext_1.default);\n    const rest = __rest(spec || {}, []);\n    const [collectedProps, originalConnectDropTarget] = react_dnd_1.useDrop(Object.assign(Object.assign({}, rest), { accept: type, collect: (monitor) => {\n            const hovered = monitor.isOver({ shallow: true });\n            return Object.assign({ hovered }, (spec && spec.collect ? spec.collect(monitor) : {}));\n        } }));\n    react_1.default.useEffect(() => {\n        if (collectedProps.hovered) {\n            onHoverBegin(id, connectedDropRef);\n            wasHoveredRef.current = true;\n        }\n        else if (wasHoveredRef.current === true) {\n            onHoverEnd(id);\n        }\n    }, [id, collectedProps.hovered, onHoverBegin, onHoverEnd]);\n    const connectDropTarget = (...args) => {\n        const result = originalConnectDropTarget(...args);\n        // @ts-ignore\n        connectedDropRef.current = result;\n        return result;\n    };\n    // @ts-ignore\n    return [collectedProps, connectDropTarget];\n}\nexports.default = useDrop;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}